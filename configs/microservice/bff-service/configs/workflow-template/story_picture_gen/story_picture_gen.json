{"name":"story_picture_gen","desc":"绘本故事配图生成工具","schema":"{\"nodes\":[{\"id\":\"100001\",\"type\":\"1\",\"meta\":{\"position\":{\"x\":180,\"y\":27}},\"data\":{\"nodeMeta\":{\"title\":\"开始\",\"description\":\"工作流的起始节点，用于设定启动工作流需要的信息\",\"icon\":\"http://localhost:8081/api/static/icon/icon-Start-v2.jpg\"},\"outputs\":[{\"type\":\"string\",\"name\":\"input\",\"required\":true,\"description\":\"用户输入，“故事文本”（如 “小兔子发现彩色花，蝴蝶飞来…”）\"}]}},{\"id\":\"900001\",\"type\":\"2\",\"meta\":{\"position\":{\"x\":2940,\"y\":14}},\"data\":{\"nodeMeta\":{\"title\":\"结束\",\"description\":\"工作流的最终节点，用于返回工作流运行后的结果信息\",\"icon\":\"http://localhost:8081/api/static/icon/icon-End-v2.jpg\"},\"inputs\":{\"inputParameters\":[{\"name\":\"output\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"175159\",\"name\":\"fileUrl\"},\"rawMeta\":{\"type\":1}}}}],\"terminatePlan\":\"returnVariables\"}}},{\"id\":\"192811\",\"type\":\"30\",\"meta\":{\"position\":{\"x\":640,\"y\":26}},\"data\":{\"nodeMeta\":{\"title\":\"补充信息\",\"description\":\"支持中间过程的信息输入\",\"icon\":\"http://localhost:8081/api/static/icon/icon-Input-v2.jpg\",\"subTitle\":\"输入\",\"mainColor\":\"#5C62FF\"},\"outputs\":[{\"type\":\"string\",\"name\":\"input_supplement\",\"required\":false,\"description\":\"用户补充输入，可补充“绘本风格”（如水彩风）、“目标读者”（3-6 岁）\"}],\"inputs\":{\"inputParameters\":null,\"outputSchema\":\"[{\\\"type\\\":\\\"string\\\",\\\"name\\\":\\\"input_supplement\\\",\\\"required\\\":false,\\\"description\\\":\\\"用户补充输入，可补充“绘本风格”（如水彩风）、“目标读者”（3-6 岁）\\\"}]\"}}},{\"id\":\"142368\",\"type\":\"3\",\"meta\":{\"position\":{\"y\":0,\"x\":1100}},\"data\":{\"nodeMeta\":{\"title\":\"生成图像描述\",\"description\":\"调用大语言模型,使用变量和提示词生成回复\",\"icon\":\"http://localhost:8081/api/static/icon/icon-LLM-v2.png\",\"subTitle\":\"大模型\",\"mainColor\":\"#5C62FF\"},\"outputs\":[{\"type\":\"string\",\"name\":\"output\",\"description\":\"图像描述词\"}],\"inputs\":{\"inputParameters\":[{\"name\":\"input\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"100001\",\"name\":\"input\"},\"rawMeta\":{\"type\":1}}}},{\"name\":\"input_supplement\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"192811\",\"name\":\"input_supplement\"},\"rawMeta\":{\"type\":1}}}}],\"settingOnError\":{\"processType\":1,\"timeoutMs\":180000},\"llmParam\":[{\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":\"0.8\",\"rawMeta\":{\"type\":4}}},\"name\":\"temperature\"},{\"name\":\"topP\",\"input\":{\"type\":\"float\",\"value\":{\"rawMeta\":{\"type\":4},\"type\":\"literal\",\"content\":\"1\"}}},{\"name\":\"frequencyPenalty\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":\"0\",\"rawMeta\":{\"type\":4}}}},{\"name\":\"maxTokens\",\"input\":{\"type\":\"integer\",\"value\":{\"rawMeta\":{\"type\":2},\"type\":\"literal\",\"content\":\"0\"}}},{\"name\":\"responseFormat\",\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":\"0\",\"rawMeta\":{\"type\":2}}}},{\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"balance\",\"rawMeta\":{\"type\":1}}},\"name\":\"generationDiversity\"},{\"input\":{\"type\":\"string\",\"value\":{\"rawMeta\":{\"type\":1},\"type\":\"literal\",\"content\":\"主要输入：{{input}}\\n补充输入：{{input_supplement}}\\n根据以上输入信息生成一段图像描述词\"}},\"name\":\"prompt\"},{\"input\":{\"type\":\"boolean\",\"value\":{\"rawMeta\":{\"type\":3},\"type\":\"literal\",\"content\":false}},\"name\":\"enableChatHistory\"},{\"name\":\"chatHistoryRound\",\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":\"3\",\"rawMeta\":{\"type\":2}}}},{\"name\":\"systemPrompt\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"你负责提取关键场景 / 角色，生成图像描述词\",\"rawMeta\":{\"type\":1}}}}]}}},{\"id\":\"127917\",\"type\":\"1009\",\"meta\":{\"position\":{\"y\":13,\"x\":1560}},\"data\":{\"nodeMeta\":{\"title\":\"文生图工具\",\"description\":\"用于调用MCP服务的工具\",\"icon\":\"http://localhost:8081/api/static/icon/icon-MCP-v2.png\",\"subTitle\":\"MCP工具\",\"mainColor\":\"#FF811A\"},\"outputs\":[{\"type\":\"object\",\"name\":\"result\",\"schema\":[{\"type\":\"list\",\"name\":\"content\",\"schema\":{\"type\":\"object\",\"schema\":[]}}]}],\"inputs\":{\"inputParameters\":[{\"name\":\"prompt\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"142368\",\"name\":\"output\"},\"rawMeta\":{\"type\":1}}}}],\"mcpInfoList\":[]}}},{\"id\":\"175159\",\"type\":\"1007\",\"meta\":{\"position\":{\"x\":2480,\"y\":13}},\"data\":{\"nodeMeta\":{\"title\":\"文档生成\",\"description\":\"输入文档的内容、格式和文件名，可以生成文档下载链接\",\"icon\":\"http://localhost:8081/api/static/icon/icon-KnowledgeQuery-v2.jpg\",\"subTitle\":\"文档生成\",\"mainColor\":\"#FF811A\"},\"outputs\":[{\"type\":\"string\",\"name\":\"fileUrl\"}],\"inputs\":{\"inputParameters\":[{\"name\":\"Title\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"100001\",\"name\":\"input\"},\"rawMeta\":{\"type\":1}}}},{\"name\":\"Content\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"188537\",\"name\":\"output\"},\"rawMeta\":{\"type\":1}}}},{\"name\":\"fileType\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"txt\"}}}]}}},{\"id\":\"188537\",\"type\":\"15\",\"meta\":{\"position\":{\"x\":2020,\"y\":13}},\"data\":{\"nodeMeta\":{\"title\":\"文本处理\",\"description\":\"用于处理多个字符串类型变量的格式\",\"icon\":\"http://localhost:8081/api/static/icon/icon-StrConcat-v2.jpg\",\"subTitle\":\"文本处理\",\"mainColor\":\"#3071F2\"},\"outputs\":[{\"type\":\"string\",\"name\":\"output\",\"required\":true}],\"inputs\":{\"inputParameters\":[{\"name\":\"String1\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"142368\",\"name\":\"output\"},\"rawMeta\":{\"type\":1}}}},{\"name\":\"String2\",\"input\":{\"type\":\"list\",\"schema\":{\"type\":\"object\",\"schema\":[]},\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"127917\",\"name\":\"result.content\"},\"rawMeta\":{\"type\":103}}}}],\"method\":\"concat\",\"concatParams\":[{\"name\":\"concatResult\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"{{String1}}\\n如下图\\n{{String2}}\",\"rawMeta\":{\"type\":1}}}},{\"name\":\"arrayItemConcatChar\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"，\",\"rawMeta\":{\"type\":1}}}},{\"name\":\"allArrayItemConcatChars\",\"input\":{\"type\":\"list\",\"schema\":{\"type\":\"object\",\"schema\":[{\"type\":\"string\",\"name\":\"label\",\"required\":true},{\"required\":true,\"type\":\"string\",\"name\":\"value\"},{\"type\":\"boolean\",\"name\":\"isDefault\",\"required\":true}]},\"value\":{\"type\":\"literal\",\"content\":[{\"label\":\"换行\",\"value\":\"\\n\",\"isDefault\":true},{\"label\":\"制表符\",\"value\":\"\\t\",\"isDefault\":true},{\"isDefault\":true,\"label\":\"句号\",\"value\":\"。\"},{\"label\":\"逗号\",\"value\":\"，\",\"isDefault\":true},{\"isDefault\":true,\"label\":\"分号\",\"value\":\"；\"},{\"label\":\"空格\",\"value\":\" \",\"isDefault\":true}]}}}]}}}],\"edges\":[{\"sourceNodeID\":\"100001\",\"targetNodeID\":\"192811\"},{\"sourceNodeID\":\"175159\",\"targetNodeID\":\"900001\"},{\"sourceNodeID\":\"192811\",\"targetNodeID\":\"142368\"},{\"sourceNodeID\":\"142368\",\"targetNodeID\":\"127917\"},{\"sourceNodeID\":\"127917\",\"targetNodeID\":\"188537\"},{\"sourceNodeID\":\"188537\",\"targetNodeID\":\"175159\"}],\"versions\":{\"loop\":\"v2\"}}"}