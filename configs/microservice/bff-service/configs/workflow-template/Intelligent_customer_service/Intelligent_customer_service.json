{"name":"Intelligent_customer_service","desc":"智能客服系统","schema":"{\"nodes\":[{\"id\":\"100001\",\"type\":\"1\",\"meta\":{\"position\":{\"x\":180,\"y\":266.6}},\"data\":{\"nodeMeta\":{\"title\":\"开始\",\"description\":\"工作流的起始节点，用于设定启动工作流需要的信息\",\"icon\":\"http://localhost:8081/api/static/icon/icon-Start-v2.jpg\"},\"outputs\":[{\"type\":\"string\",\"name\":\"input\",\"required\":true,\"description\":\"用户输入\"}]}},{\"id\":\"900001\",\"type\":\"2\",\"meta\":{\"position\":{\"x\":2480,\"y\":253.60000000000002}},\"data\":{\"nodeMeta\":{\"title\":\"结束\",\"description\":\"工作流的最终节点，用于返回工作流运行后的结果信息\",\"icon\":\"http://localhost:8081/api/static/icon/icon-End-v2.jpg\"},\"inputs\":{\"inputParameters\":[{\"name\":\"output\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"name\":\"Group1\",\"source\":\"block-output\",\"blockID\":\"118740\"},\"rawMeta\":{\"type\":1}}}},{\"name\":\"reason\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"193983\",\"name\":\"reason\"},\"rawMeta\":{\"type\":1}}}}],\"terminatePlan\":\"returnVariables\"}}},{\"id\":\"193983\",\"type\":\"22\",\"meta\":{\"position\":{\"y\":202.60000000000002,\"x\":640}},\"data\":{\"nodeMeta\":{\"title\":\"意图识别\",\"description\":\"用于用户输入的意图识别，并将其与预设意图选项进行匹配。\",\"icon\":\"http://localhost:8081/api/static/icon/icon-Intent-v2.jpg\",\"subTitle\":\"意图识别\",\"mainColor\":\"#00B2B2\"},\"outputs\":[{\"type\":\"integer\",\"name\":\"classificationId\"},{\"type\":\"string\",\"name\":\"reason\"}],\"inputs\":{\"inputParameters\":[{\"name\":\"query\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"name\":\"input\",\"source\":\"block-output\",\"blockID\":\"100001\"},\"rawMeta\":{\"type\":1}}}}],\"chatHistorySetting\":{\"chatHistoryRound\":3},\"settingOnError\":{\"processType\":1,\"timeoutMs\":60000},\"llmParam\":{\"systemPrompt\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"咨询产品的示例问题：\\n1.你们的桌子质量怎么样？\\n2.这个杯子是否通过3C认证？\\n\\n查询订单的示例问题：\\n1.我付款显示成功，但是一直没收到货品，是怎么回事？\\n2.我准备退货，你查一下是否有退运险。\"}},\"chatHistoryRound\":3,\"topP\":1,\"enableChatHistory\":false,\"generationDiversity\":\"balance\",\"frequencyPenalty\":0,\"temperature\":0.8,\"maxTokens\":0,\"responseFormat\":2,\"prompt\":{\"type\":\"string\",\"value\":{\"content\":\"{{query}}\",\"type\":\"literal\"}}},\"intents\":[{\"name\":\"咨询产品\"},{\"name\":\"查询订单\"}],\"mode\":\"all\"}}},{\"id\":\"189437\",\"type\":\"1006\",\"meta\":{\"position\":{\"x\":1100,\"y\":0}},\"data\":{\"nodeMeta\":{\"title\":\"订单知识库\",\"description\":\"在选定的知识中,根据输入变量召回最匹配的信息,并以列表形式返回\",\"icon\":\"http://localhost:8081/api/static/icon/icon-KnowledgeQuery-v2.jpg\",\"subTitle\":\"知识库检索\",\"mainColor\":\"#FF811A\"},\"outputs\":[{\"type\":\"object\",\"name\":\"output\",\"schema\":[{\"type\":\"string\",\"name\":\"prompt\"},{\"type\":\"list\",\"name\":\"score\",\"schema\":{\"type\":\"float\"}},{\"type\":\"list\",\"name\":\"searchList\",\"schema\":{\"schema\":[],\"type\":\"object\"}}]}],\"inputs\":{\"inputParameters\":[{\"name\":\"Query\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"100001\",\"name\":\"input\"},\"rawMeta\":{\"type\":1}}}}],\"datasetParam\":[{\"name\":\"knowledgeList\",\"input\":{\"type\":\"list\",\"schema\":{\"type\":\"string\"},\"value\":{\"type\":\"literal\",\"content\":[]}}},{\"name\":\"topK\",\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":5}}},{\"name\":\"rerankKeywordPrioritySwitch\",\"input\":{\"type\":\"boolean\",\"value\":{\"type\":\"literal\",\"content\":false,\"rawMeta\":{\"type\":3}}}},{\"name\":\"rewrite\",\"input\":{\"type\":\"boolean\",\"value\":{\"type\":\"literal\",\"content\":true,\"rawMeta\":{\"type\":3}}}},{\"name\":\"threshold\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":0.4}}},{\"name\":\"semanticsPriority\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":0.2}}},{\"name\":\"maxHistory\",\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":0}}},{\"name\":\"rerankKeywordPriority\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":1}}},{\"name\":\"matchType\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"vector\"}}},{\"name\":\"rerankModelId\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"3\"}}}],\"strategyParam\":{\"parsingStrategy\":{\"imageExtraction\":false,\"tableExtraction\":false,\"imageOcr\":false},\"chunkStrategy\":{},\"indexStrategy\":null}}}},{\"id\":\"115653\",\"type\":\"1006\",\"meta\":{\"position\":{\"x\":1100,\"y\":239.60000000000002}},\"data\":{\"nodeMeta\":{\"title\":\"产品知识库\",\"description\":\"在选定的知识中,根据输入变量召回最匹配的信息,并以列表形式返回\",\"icon\":\"http://localhost:8081/api/static/icon/icon-KnowledgeQuery-v2.jpg\",\"subTitle\":\"知识库检索\",\"mainColor\":\"#FF811A\"},\"outputs\":[{\"type\":\"object\",\"name\":\"output\",\"schema\":[{\"type\":\"string\",\"name\":\"prompt\"},{\"type\":\"list\",\"name\":\"score\",\"schema\":{\"type\":\"float\"}},{\"name\":\"searchList\",\"schema\":{\"type\":\"object\",\"schema\":[]},\"type\":\"list\"}]}],\"inputs\":{\"inputParameters\":[{\"name\":\"Query\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"100001\",\"name\":\"input\"},\"rawMeta\":{\"type\":1}}}}],\"datasetParam\":[{\"name\":\"knowledgeList\",\"input\":{\"type\":\"list\",\"schema\":{\"type\":\"string\"},\"value\":{\"type\":\"literal\",\"content\":[]}}},{\"name\":\"topK\",\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":5}}},{\"name\":\"rerankKeywordPrioritySwitch\",\"input\":{\"type\":\"boolean\",\"value\":{\"type\":\"literal\",\"content\":false,\"rawMeta\":{\"type\":3}}}},{\"name\":\"rewrite\",\"input\":{\"type\":\"boolean\",\"value\":{\"type\":\"literal\",\"content\":true,\"rawMeta\":{\"type\":3}}}},{\"name\":\"threshold\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":0.4}}},{\"name\":\"semanticsPriority\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":0.2}}},{\"name\":\"maxHistory\",\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":0}}},{\"name\":\"rerankKeywordPriority\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":1}}},{\"name\":\"matchType\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"vector\"}}},{\"name\":\"rerankModelId\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"3\"}}}],\"strategyParam\":{\"parsingStrategy\":{\"imageExtraction\":false,\"tableExtraction\":false,\"imageOcr\":false},\"chunkStrategy\":{},\"indexStrategy\":null}}}},{\"id\":\"150303\",\"type\":\"3\",\"meta\":{\"position\":{\"x\":1560,\"y\":479.2}},\"data\":{\"nodeMeta\":{\"title\":\"投诉回复生成\",\"description\":\"调用大语言模型,使用变量和提示词生成回复\",\"icon\":\"http://localhost:8081/api/static/icon/icon-LLM-v2.png\",\"subTitle\":\"大模型\",\"mainColor\":\"#5C62FF\"},\"outputs\":[{\"type\":\"string\",\"name\":\"output\"}],\"inputs\":{\"inputParameters\":[{\"name\":\"input\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"100001\",\"name\":\"input\"},\"rawMeta\":{\"type\":1}}}}],\"settingOnError\":{\"processType\":1,\"timeoutMs\":180000},\"llmParam\":[{\"input\":{\"type\":\"string\",\"value\":{\"content\":\"balance\",\"rawMeta\":{\"type\":1},\"type\":\"literal\"}},\"name\":\"generationDiversity\"},{\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":\"0.8\",\"rawMeta\":{\"type\":4}}},\"name\":\"temperature\"},{\"name\":\"topP\",\"input\":{\"type\":\"float\",\"value\":{\"rawMeta\":{\"type\":4},\"type\":\"literal\",\"content\":\"1\"}}},{\"name\":\"frequencyPenalty\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":\"0\",\"rawMeta\":{\"type\":4}}}},{\"name\":\"maxTokens\",\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":\"0\",\"rawMeta\":{\"type\":2}}}},{\"name\":\"responseFormat\",\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":\"2\",\"rawMeta\":{\"type\":2}}}},{\"name\":\"prompt\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"{{input}}\",\"rawMeta\":{\"type\":1}}}},{\"name\":\"enableChatHistory\",\"input\":{\"type\":\"boolean\",\"value\":{\"type\":\"literal\",\"content\":false,\"rawMeta\":{\"type\":3}}}},{\"name\":\"chatHistoryRound\",\"input\":{\"type\":\"integer\",\"value\":{\"rawMeta\":{\"type\":2},\"type\":\"literal\",\"content\":\"3\"}}},{\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"你是一个AI智能客服专员，能够友好得体地回复用户\",\"rawMeta\":{\"type\":1}}},\"name\":\"systemPrompt\"}]}}},{\"id\":\"118740\",\"type\":\"32\",\"meta\":{\"position\":{\"x\":2020,\"y\":251.60000000000002}},\"data\":{\"nodeMeta\":{\"title\":\"变量聚合\",\"description\":\"对多个分支的输出进行聚合处理\",\"icon\":\"http://localhost:8081/api/static/icon/icon-VariableMerge.jpg\",\"subTitle\":\"变量聚合\",\"mainColor\":\"#00B2B2\"},\"outputs\":[{\"type\":\"string\",\"name\":\"Group1\"}],\"inputs\":{\"inputParameters\":null,\"mergeGroups\":[{\"name\":\"Group1\",\"variables\":[{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"150303\",\"name\":\"output\"},\"rawMeta\":{\"type\":1}}},{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"117319\",\"name\":\"output\"},\"rawMeta\":{\"type\":1}}},{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"153242\",\"name\":\"output\"},\"rawMeta\":{\"type\":1}}}]}]}}},{\"id\":\"117319\",\"type\":\"3\",\"meta\":{\"position\":{\"x\":1560,\"y\":239.60000000000002}},\"data\":{\"nodeMeta\":{\"title\":\"产品咨询回复\",\"description\":\"调用大语言模型,使用变量和提示词生成回复\",\"icon\":\"http://localhost:8081/api/static/icon/icon-LLM-v2.png\",\"subTitle\":\"大模型\",\"mainColor\":\"#5C62FF\"},\"outputs\":[{\"type\":\"string\",\"name\":\"output\"}],\"inputs\":{\"inputParameters\":[{\"name\":\"input\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"blockID\":\"100001\",\"name\":\"input\",\"source\":\"block-output\"},\"rawMeta\":{\"type\":1}}}},{\"name\":\"searchList\",\"input\":{\"type\":\"list\",\"schema\":{\"schema\":[],\"type\":\"object\"},\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"115653\",\"name\":\"output.searchList\"},\"rawMeta\":{\"type\":103}}}}],\"settingOnError\":{\"processType\":1,\"timeoutMs\":180000},\"llmParam\":[{\"name\":\"generationDiversity\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"balance\",\"rawMeta\":{\"type\":1}}}},{\"name\":\"temperature\",\"input\":{\"type\":\"float\",\"value\":{\"rawMeta\":{\"type\":4},\"type\":\"literal\",\"content\":\"0.8\"}}},{\"name\":\"topP\",\"input\":{\"type\":\"float\",\"value\":{\"rawMeta\":{\"type\":4},\"type\":\"literal\",\"content\":\"1\"}}},{\"name\":\"frequencyPenalty\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":\"0\",\"rawMeta\":{\"type\":4}}}},{\"name\":\"maxTokens\",\"input\":{\"value\":{\"type\":\"literal\",\"content\":\"0\",\"rawMeta\":{\"type\":2}},\"type\":\"integer\"}},{\"name\":\"responseFormat\",\"input\":{\"type\":\"integer\",\"value\":{\"rawMeta\":{\"type\":2},\"type\":\"literal\",\"content\":\"2\"}}},{\"name\":\"prompt\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"根据以下知识库搜索结果\\n{{searchList}}\\n回答用户问题：{{input}}\",\"rawMeta\":{\"type\":1}}}},{\"name\":\"enableChatHistory\",\"input\":{\"type\":\"boolean\",\"value\":{\"type\":\"literal\",\"content\":false,\"rawMeta\":{\"type\":3}}}},{\"name\":\"chatHistoryRound\",\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":\"3\",\"rawMeta\":{\"type\":2}}}},{\"name\":\"systemPrompt\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"你是一个知识库检索专家，善于根据知识库信息总结回答用户问题\",\"rawMeta\":{\"type\":1}}}}]}}},{\"id\":\"153242\",\"type\":\"3\",\"meta\":{\"position\":{\"x\":1560,\"y\":0}},\"data\":{\"nodeMeta\":{\"title\":\"订单查询回复\",\"description\":\"调用大语言模型,使用变量和提示词生成回复\",\"icon\":\"http://localhost:8081/api/static/icon/icon-LLM-v2.png\",\"subTitle\":\"大模型\",\"mainColor\":\"#5C62FF\"},\"outputs\":[{\"type\":\"string\",\"name\":\"output\"}],\"inputs\":{\"inputParameters\":[{\"name\":\"searchList\",\"input\":{\"type\":\"list\",\"schema\":{\"type\":\"object\",\"schema\":[]},\"value\":{\"type\":\"ref\",\"content\":{\"name\":\"output.searchList\",\"source\":\"block-output\",\"blockID\":\"189437\"},\"rawMeta\":{\"type\":103}}}},{\"name\":\"input\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"100001\",\"name\":\"input\"},\"rawMeta\":{\"type\":1}}}}],\"settingOnError\":{\"processType\":1,\"timeoutMs\":180000},\"llmParam\":[{\"name\":\"generationDiversity\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"balance\",\"rawMeta\":{\"type\":1}}}},{\"name\":\"temperature\",\"input\":{\"type\":\"float\",\"value\":{\"content\":\"0.8\",\"rawMeta\":{\"type\":4},\"type\":\"literal\"}}},{\"name\":\"topP\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":\"1\",\"rawMeta\":{\"type\":4}}}},{\"name\":\"frequencyPenalty\",\"input\":{\"type\":\"float\",\"value\":{\"content\":\"0\",\"rawMeta\":{\"type\":4},\"type\":\"literal\"}}},{\"name\":\"maxTokens\",\"input\":{\"type\":\"integer\",\"value\":{\"content\":\"0\",\"rawMeta\":{\"type\":2},\"type\":\"literal\"}}},{\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":\"2\",\"rawMeta\":{\"type\":2}}},\"name\":\"responseFormat\"},{\"name\":\"prompt\",\"input\":{\"type\":\"string\",\"value\":{\"rawMeta\":{\"type\":1},\"type\":\"literal\",\"content\":\"根据以下知识库搜索结果\\n{{searchList}}\\n回答用户问题：{{input}}\"}}},{\"name\":\"enableChatHistory\",\"input\":{\"type\":\"boolean\",\"value\":{\"type\":\"literal\",\"content\":false,\"rawMeta\":{\"type\":3}}}},{\"name\":\"chatHistoryRound\",\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":\"3\",\"rawMeta\":{\"type\":2}}}},{\"name\":\"systemPrompt\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"你是一个知识库检索专家，善于根据知识库信息总结回答用户问题\",\"rawMeta\":{\"type\":1}}}}]}}}],\"edges\":[{\"sourceNodeID\":\"100001\",\"targetNodeID\":\"193983\"},{\"sourceNodeID\":\"118740\",\"targetNodeID\":\"900001\"},{\"sourceNodeID\":\"193983\",\"targetNodeID\":\"115653\",\"sourcePortID\":\"branch_0\"},{\"sourceNodeID\":\"193983\",\"targetNodeID\":\"189437\",\"sourcePortID\":\"branch_1\"},{\"sourceNodeID\":\"193983\",\"targetNodeID\":\"150303\",\"sourcePortID\":\"default\"},{\"sourceNodeID\":\"189437\",\"targetNodeID\":\"153242\"},{\"sourceNodeID\":\"115653\",\"targetNodeID\":\"117319\"},{\"sourceNodeID\":\"150303\",\"targetNodeID\":\"118740\"},{\"sourceNodeID\":\"117319\",\"targetNodeID\":\"118740\"},{\"sourceNodeID\":\"153242\",\"targetNodeID\":\"118740\"}],\"versions\":{\"loop\":\"v2\"}}"}