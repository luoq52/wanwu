{"name":"smart_contract_review","desc":"智能合同审核系统","schema":"{\"nodes\":[{\"id\":\"100001\",\"type\":\"1\",\"meta\":{\"position\":{\"x\":50.68965317127859,\"y\":146.8}},\"data\":{\"nodeMeta\":{\"title\":\"开始\",\"description\":\"工作流的起始节点，用于设定启动工作流需要的信息\",\"icon\":\"http://%E2%80%8B%E2%80%8B192.168.0.1:8081/api/static/icon/icon-Start-v2.jpg\"},\"outputs\":[{\"type\":\"string\",\"name\":\"input\",\"required\":true},{\"required\":true,\"type\":\"string\",\"assistType\":1,\"name\":\"file\"}]}},{\"id\":\"900001\",\"type\":\"2\",\"meta\":{\"position\":{\"x\":2983.448283653155,\"y\":133.8}},\"data\":{\"nodeMeta\":{\"title\":\"结束\",\"description\":\"工作流的最终节点，用于返回工作流运行后的结果信息\",\"icon\":\"http://%E2%80%8B%E2%80%8B192.168.0.1:8081/api/static/icon/icon-End-v2.jpg\"},\"inputs\":{\"inputParameters\":[{\"name\":\"output\",\"input\":{\"type\":\"object\",\"schema\":[{\"name\":\"out1\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"name\":\"output\",\"source\":\"block-output\",\"blockID\":\"128939\"},\"rawMeta\":{\"type\":1}}}},{\"input\":{\"type\":\"string\",\"value\":{\"content\":{\"name\":\"output\",\"source\":\"block-output\",\"blockID\":\"145108\"},\"rawMeta\":{\"type\":1},\"type\":\"ref\"}},\"name\":\"out2\"}],\"value\":{\"type\":\"object_ref\"}}}],\"terminatePlan\":\"returnVariables\"}}},{\"id\":\"152281\",\"type\":\"1008\",\"meta\":{\"position\":{\"x\":562.4137919027671,\"y\":118.80000000000007}},\"data\":{\"nodeMeta\":{\"title\":\"文档解析\",\"description\":\"输入txt、pdf、docx、xlsx、csv、pptx等格式文档的URL，可以解析提取出文档的文本内容\",\"icon\":\"http://%E2%80%8B%E2%80%8B192.168.0.1:8081/api/static/icon/icon-KnowledgeQuery-v2.jpg\",\"subTitle\":\"文档解析\",\"mainColor\":\"#FF811A\"},\"outputs\":[{\"type\":\"string\",\"name\":\"text\"}],\"inputs\":{\"inputParameters\":[{\"name\":\"FileUrl\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"100001\",\"name\":\"file\"},\"rawMeta\":{\"type\":1}}}}]}}},{\"id\":\"189320\",\"type\":\"22\",\"meta\":{\"position\":{\"x\":1479.3103506975829,\"y\":55.213792676539455}},\"data\":{\"nodeMeta\":{\"title\":\"意图识别\",\"description\":\"用于用户输入的意图识别，并将其与预设意图选项进行匹配。\",\"icon\":\"http://%E2%80%8B%E2%80%8B192.168.0.1:8081/api/static/icon/icon-Intent-v2.jpg\",\"subTitle\":\"意图识别\",\"mainColor\":\"#00B2B2\"},\"outputs\":[{\"type\":\"integer\",\"name\":\"classificationId\"},{\"type\":\"string\",\"name\":\"reason\"}],\"inputs\":{\"inputParameters\":[{\"name\":\"query\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"100001\",\"name\":\"input\"},\"rawMeta\":{\"type\":1}}}}],\"chatHistorySetting\":{\"chatHistoryRound\":3},\"settingOnError\":{\"processType\":1,\"timeoutMs\":60000},\"llmParam\":{\"frequencyPenalty\":0,\"temperature\":0.8,\"topP\":1,\"chatHistoryRound\":3,\"generationDiversity\":\"balance\",\"prompt\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"{{query}}\"}},\"systemPrompt\":{\"value\":{\"type\":\"literal\",\"content\":\"合规性检查的示例问题：\\n1.请检查这份《供应商合作协议》中的​​数据处理条款​​，是否符合《个人信息保护法》关于个人信息出境的规定？\\n2.这份《建设工程施工合同》中约定的​​安全生产标准​​，是否满足了住建部最新发布的《建筑施工安全统一标准》（GB 50870-2023）的强制性要求？\\n3.审查以下《员工保密协议》的​​竞业限制条款​​，其约定的限制期限、地域和范围，是否超出《劳动合同法》第二十四条规定的合理界限？\\n\\n风险条款识别的示例问题：\\n1.请识别这份《软件采购合同》中的​​付款与验收条款​​，是否存在可能导致我方（买方）付款后无法有效约束供应商履行后续维护义务的风险？\\n2.分析这份《场地租赁合同》中的​​单方解除权条款​​，是否存在权利分配严重不公的情况？例如，是否仅赋予出租方过宽的合同解除权而无需承担相应责任？\\n3.请评估这份《产品销售合同》范本中的​​违约责任条款​​，是否存在模糊或过高的违约金约定，可能在未来引发争议或给我方带来不可预见的财务损失？\"},\"type\":\"string\"},\"enableChatHistory\":false,\"maxTokens\":0,\"responseFormat\":2},\"intents\":[{\"name\":\"合规性检查\"},{\"name\":\"风险条款识别\"}],\"mode\":\"all\"}}},{\"id\":\"150644\",\"type\":\"1006\",\"meta\":{\"position\":{\"x\":2008.275869006234,\"y\":-6.799999999999983}},\"data\":{\"nodeMeta\":{\"title\":\"合规检索\",\"description\":\"在选定的知识中,根据输入变量召回最匹配的信息,并以列表形式返回\",\"icon\":\"http://%E2%80%8B%E2%80%8B192.168.0.1:8081/api/static/icon/icon-KnowledgeQuery-v2.jpg\",\"subTitle\":\"知识库检索\",\"mainColor\":\"#FF811A\"},\"outputs\":[{\"schema\":[{\"type\":\"string\",\"name\":\"prompt\"},{\"type\":\"list\",\"name\":\"score\",\"schema\":{\"type\":\"float\"}},{\"type\":\"list\",\"name\":\"searchList\",\"schema\":{\"type\":\"object\",\"schema\":[]}}],\"type\":\"object\",\"name\":\"output\"}],\"inputs\":{\"inputParameters\":[{\"name\":\"Query\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"104339\",\"name\":\"output\"},\"rawMeta\":{\"type\":1}}}}],\"datasetParam\":[{\"name\":\"knowledgeList\",\"input\":{\"type\":\"list\",\"schema\":{\"type\":\"string\"},\"value\":{\"type\":\"literal\",\"content\":[]}}},{\"name\":\"topK\",\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":5}}},{\"name\":\"rerankKeywordPrioritySwitch\",\"input\":{\"type\":\"boolean\",\"value\":{\"type\":\"literal\",\"content\":false,\"rawMeta\":{\"type\":3}}}},{\"name\":\"rewrite\",\"input\":{\"type\":\"boolean\",\"value\":{\"type\":\"literal\",\"content\":true,\"rawMeta\":{\"type\":3}}}},{\"name\":\"threshold\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":0.4}}},{\"name\":\"semanticsPriority\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":0.2}}},{\"name\":\"maxHistory\",\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":0}}},{\"name\":\"rerankKeywordPriority\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":1}}},{\"name\":\"matchType\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"vector\"}}},{\"name\":\"rerankModelId\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"3\"}}}],\"strategyParam\":{\"parsingStrategy\":{\"imageExtraction\":false,\"tableExtraction\":false,\"imageOcr\":false},\"chunkStrategy\":{},\"indexStrategy\":null}}}},{\"id\":\"128939\",\"type\":\"3\",\"meta\":{\"position\":{\"x\":2468.275869006234,\"y\":0}},\"data\":{\"nodeMeta\":{\"title\":\"合规总结\",\"description\":\"调用大语言模型,使用变量和提示词生成回复\",\"icon\":\"http://%E2%80%8B%E2%80%8B192.168.0.1:8081/api/static/icon/icon-LLM-v2.png\",\"subTitle\":\"大模型\",\"mainColor\":\"#5C62FF\"},\"outputs\":[{\"type\":\"string\",\"name\":\"output\"}],\"inputs\":{\"inputParameters\":[{\"name\":\"input\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"100001\",\"name\":\"input\"},\"rawMeta\":{\"type\":1}}}}],\"settingOnError\":{\"processType\":1,\"timeoutMs\":180000},\"llmParam\":[{\"name\":\"generationDiversity\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"balance\",\"rawMeta\":{\"type\":1}}}},{\"name\":\"temperature\",\"input\":{\"value\":{\"type\":\"literal\",\"content\":\"0.8\",\"rawMeta\":{\"type\":4}},\"type\":\"float\"}},{\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":\"1\",\"rawMeta\":{\"type\":4}}},\"name\":\"topP\"},{\"name\":\"frequencyPenalty\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":\"0\",\"rawMeta\":{\"type\":4}}}},{\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":\"0\",\"rawMeta\":{\"type\":2}}},\"name\":\"maxTokens\"},{\"input\":{\"value\":{\"type\":\"literal\",\"content\":\"2\",\"rawMeta\":{\"type\":2}},\"type\":\"integer\"},\"name\":\"responseFormat\"},{\"name\":\"prompt\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"根据以下知识库搜索结果\\n{{searchList}}\\n回答用户问题：{{input}}\",\"rawMeta\":{\"type\":1}}}},{\"name\":\"enableChatHistory\",\"input\":{\"value\":{\"rawMeta\":{\"type\":3},\"type\":\"literal\",\"content\":false},\"type\":\"boolean\"}},{\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":\"3\",\"rawMeta\":{\"type\":2}}},\"name\":\"chatHistoryRound\"},{\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"你是一个知识库检索专家，善于根据知识库信息总结回答用户问题\",\"rawMeta\":{\"type\":1}}},\"name\":\"systemPrompt\"}]}}},{\"id\":\"145108\",\"type\":\"3\",\"meta\":{\"position\":{\"x\":2442.4137996404897,\"y\":277.53103506975833}},\"data\":{\"nodeMeta\":{\"title\":\"风险分析\",\"description\":\"调用大语言模型,使用变量和提示词生成回复\",\"icon\":\"http://%E2%80%8B%E2%80%8B192.168.0.1:8081/api/static/icon/icon-LLM-v2.png\",\"subTitle\":\"大模型\",\"mainColor\":\"#5C62FF\"},\"outputs\":[{\"type\":\"string\",\"name\":\"output\"}],\"inputs\":{\"inputParameters\":[{\"name\":\"input\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"blockID\":\"100001\",\"name\":\"input\",\"source\":\"block-output\"},\"rawMeta\":{\"type\":1}}}},{\"name\":\"text\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"name\":\"text\",\"source\":\"block-output\",\"blockID\":\"152281\"},\"rawMeta\":{\"type\":1}}}}],\"settingOnError\":{\"processType\":1,\"timeoutMs\":180000},\"llmParam\":[{\"name\":\"generationDiversity\",\"input\":{\"value\":{\"type\":\"literal\",\"content\":\"balance\",\"rawMeta\":{\"type\":1}},\"type\":\"string\"}},{\"name\":\"temperature\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":\"0.8\",\"rawMeta\":{\"type\":4}}}},{\"name\":\"topP\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":\"1\",\"rawMeta\":{\"type\":4}}}},{\"name\":\"frequencyPenalty\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":\"0\",\"rawMeta\":{\"type\":4}}}},{\"name\":\"maxTokens\",\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":\"0\",\"rawMeta\":{\"type\":2}}}},{\"name\":\"responseFormat\",\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":\"2\",\"rawMeta\":{\"type\":2}}}},{\"name\":\"prompt\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"根据以下用户材料内容：\\n{{text}}\\n回答用户问题：{{input}}\",\"rawMeta\":{\"type\":1}}}},{\"name\":\"enableChatHistory\",\"input\":{\"type\":\"boolean\",\"value\":{\"type\":\"literal\",\"content\":false,\"rawMeta\":{\"type\":3}}}},{\"name\":\"chatHistoryRound\",\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":\"3\",\"rawMeta\":{\"type\":2}}}},{\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"你是一个AI智能合同助手，能够基于自己的知识友好地回复用户\",\"rawMeta\":{\"type\":1}}},\"name\":\"systemPrompt\"}]}}},{\"id\":\"104339\",\"type\":\"15\",\"meta\":{\"position\":{\"x\":1033.793105983047,\"y\":118.80000000000007}},\"data\":{\"nodeMeta\":{\"title\":\"文本处理\",\"description\":\"用于处理多个字符串类型变量的格式\",\"icon\":\"http://%E2%80%8B%E2%80%8B192.168.0.1:8081/api/static/icon/icon-StrConcat-v2.jpg\",\"subTitle\":\"文本处理\",\"mainColor\":\"#3071F2\"},\"outputs\":[{\"type\":\"string\",\"name\":\"output\",\"required\":true}],\"inputs\":{\"inputParameters\":[{\"name\":\"String1\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"name\":\"input\",\"source\":\"block-output\",\"blockID\":\"100001\"},\"rawMeta\":{\"type\":1}}}},{\"name\":\"String2\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"blockID\":\"152281\",\"name\":\"text\",\"source\":\"block-output\"},\"rawMeta\":{\"type\":1}}}}],\"method\":\"concat\",\"concatParams\":[{\"name\":\"concatResult\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"用户问题：{{String1}}\\n用户材料内容：{{String2}}\",\"rawMeta\":{\"type\":1}}}},{\"name\":\"arrayItemConcatChar\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"，\",\"rawMeta\":{\"type\":1}}}},{\"name\":\"allArrayItemConcatChars\",\"input\":{\"type\":\"list\",\"schema\":{\"type\":\"object\",\"schema\":[{\"type\":\"string\",\"name\":\"label\",\"required\":true},{\"type\":\"string\",\"name\":\"value\",\"required\":true},{\"type\":\"boolean\",\"name\":\"isDefault\",\"required\":true}]},\"value\":{\"type\":\"literal\",\"content\":[{\"label\":\"换行\",\"value\":\"\\n\",\"isDefault\":true},{\"label\":\"制表符\",\"value\":\"\\t\",\"isDefault\":true},{\"label\":\"句号\",\"value\":\"。\",\"isDefault\":true},{\"label\":\"逗号\",\"value\":\"，\",\"isDefault\":true},{\"value\":\"；\",\"isDefault\":true,\"label\":\"分号\"},{\"label\":\"空格\",\"value\":\" \",\"isDefault\":true}]}}}]}}}],\"edges\":[{\"sourceNodeID\":\"100001\",\"targetNodeID\":\"152281\"},{\"sourceNodeID\":\"128939\",\"targetNodeID\":\"900001\"},{\"sourceNodeID\":\"145108\",\"targetNodeID\":\"900001\"},{\"sourceNodeID\":\"152281\",\"targetNodeID\":\"104339\"},{\"sourceNodeID\":\"104339\",\"targetNodeID\":\"189320\"},{\"sourceNodeID\":\"189320\",\"targetNodeID\":\"145108\",\"sourcePortID\":\"branch_0\"},{\"sourceNodeID\":\"189320\",\"targetNodeID\":\"150644\",\"sourcePortID\":\"branch_1\"},{\"sourceNodeID\":\"189320\",\"targetNodeID\":\"145108\",\"sourcePortID\":\"default\"},{\"sourceNodeID\":\"150644\",\"targetNodeID\":\"128939\"}],\"versions\":{\"loop\":\"v2\"}}"}