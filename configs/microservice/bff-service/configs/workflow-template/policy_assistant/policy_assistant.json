{"name":"policy_assistant","desc":"政策查询与解读助手","schema":"{\"nodes\":[{\"id\":\"100001\",\"type\":\"1\",\"meta\":{\"position\":{\"x\":180,\"y\":26.999999999999986}},\"data\":{\"nodeMeta\":{\"title\":\"开始\",\"description\":\"工作流的起始节点，用于设定启动工作流需要的信息\",\"icon\":\"http://%E2%80%8B%E2%80%8B192.168.0.1:8081/api/static/icon/icon-Start-v2.jpg\"},\"outputs\":[{\"required\":true,\"description\":\"用户问题\",\"type\":\"string\",\"name\":\"input\"}]}},{\"id\":\"900001\",\"type\":\"2\",\"meta\":{\"position\":{\"y\":13.999999999999986,\"x\":3860}},\"data\":{\"nodeMeta\":{\"title\":\"结束\",\"description\":\"工作流的最终节点，用于返回工作流运行后的结果信息\",\"icon\":\"http://%E2%80%8B%E2%80%8B192.168.0.1:8081/api/static/icon/icon-End-v2.jpg\"},\"inputs\":{\"inputParameters\":[{\"name\":\"output\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"blockID\":\"128117\",\"name\":\"output\",\"source\":\"block-output\"},\"rawMeta\":{\"type\":1}}}}],\"terminatePlan\":\"returnVariables\"}}},{\"id\":\"132703\",\"type\":\"3\",\"meta\":{\"position\":{\"x\":640,\"y\":-1.4210854715202004e-14}},\"data\":{\"nodeMeta\":{\"title\":\"提取关键参数\",\"description\":\"调用大语言模型,使用变量和提示词生成回复\",\"icon\":\"http://%E2%80%8B%E2%80%8B192.168.0.1:8081/api/static/icon/icon-LLM-v2.png\",\"subTitle\":\"大模型\",\"mainColor\":\"#5C62FF\"},\"outputs\":[{\"name\":\"output\",\"schema\":[{\"type\":\"string\",\"name\":\"question\",\"description\":\"用户政策问题\"},{\"type\":\"string\",\"name\":\"city\",\"description\":\"用户所在地\"}],\"type\":\"object\"}],\"inputs\":{\"inputParameters\":[{\"name\":\"input\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"100001\",\"name\":\"input\"},\"rawMeta\":{\"type\":1}}}}],\"settingOnError\":{\"processType\":1,\"timeoutMs\":180000},\"llmParam\":[{\"name\":\"generationDiversity\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"balance\",\"rawMeta\":{\"type\":1}}}},{\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":\"0.8\",\"rawMeta\":{\"type\":4}}},\"name\":\"temperature\"},{\"name\":\"topP\",\"input\":{\"type\":\"float\",\"value\":{\"rawMeta\":{\"type\":4},\"type\":\"literal\",\"content\":\"1\"}}},{\"name\":\"frequencyPenalty\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":\"0\",\"rawMeta\":{\"type\":4}}}},{\"name\":\"maxTokens\",\"input\":{\"type\":\"integer\",\"value\":{\"content\":\"0\",\"rawMeta\":{\"type\":2},\"type\":\"literal\"}}},{\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":\"2\",\"rawMeta\":{\"type\":2}}},\"name\":\"responseFormat\"},{\"name\":\"prompt\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"从以下内容中提取信息：\\n{{input}}\\n并按照要求输出\",\"rawMeta\":{\"type\":1}}}},{\"name\":\"enableChatHistory\",\"input\":{\"type\":\"boolean\",\"value\":{\"content\":false,\"rawMeta\":{\"type\":3},\"type\":\"literal\"}}},{\"name\":\"chatHistoryRound\",\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":\"3\",\"rawMeta\":{\"type\":2}}}},{\"name\":\"systemPrompt\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"你的任务是参数提取，提取用户prompt中的信息，输出一个json结构数据\",\"rawMeta\":{\"type\":1}}}}]}}},{\"id\":\"172810\",\"type\":\"8\",\"meta\":{\"position\":{\"x\":1100,\"y\":0.14999999999997726}},\"data\":{\"nodeMeta\":{\"title\":\"判断信息齐全\",\"description\":\"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支\",\"icon\":\"http://%E2%80%8B%E2%80%8B192.168.0.1:8081/api/static/icon/icon-Condition-v2.jpg\",\"subTitle\":\"选择器\",\"mainColor\":\"#00B2B2\"},\"inputs\":{\"inputParameters\":null,\"branches\":[{\"condition\":{\"logic\":2,\"conditions\":[{\"operator\":10,\"left\":{\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"name\":\"output.city\",\"source\":\"block-output\",\"blockID\":\"132703\"}}}}}]}}]}}},{\"id\":\"152577\",\"type\":\"30\",\"meta\":{\"position\":{\"x\":1560,\"y\":112.59999999999998}},\"data\":{\"nodeMeta\":{\"title\":\"补充地区信息\",\"description\":\"支持中间过程的信息输入\",\"icon\":\"http://%E2%80%8B%E2%80%8B192.168.0.1:8081/api/static/icon/icon-Input-v2.jpg\",\"subTitle\":\"输入\",\"mainColor\":\"#5C62FF\"},\"outputs\":[{\"type\":\"string\",\"name\":\"city\",\"required\":true}],\"inputs\":{\"inputParameters\":null,\"outputSchema\":\"[{\\\"type\\\":\\\"string\\\",\\\"name\\\":\\\"city\\\",\\\"required\\\":true}]\"}}},{\"id\":\"181160\",\"type\":\"1006\",\"meta\":{\"position\":{\"x\":2940,\"y\":-1.4210854715202004e-14}},\"data\":{\"nodeMeta\":{\"title\":\"检索政策文档\",\"description\":\"在选定的知识中,根据输入变量召回最匹配的信息,并以列表形式返回\",\"icon\":\"http://%E2%80%8B%E2%80%8B192.168.0.1:8081/api/static/icon/icon-KnowledgeQuery-v2.jpg\",\"subTitle\":\"知识库检索\",\"mainColor\":\"#FF811A\"},\"outputs\":[{\"type\":\"object\",\"name\":\"output\",\"schema\":[{\"type\":\"string\",\"name\":\"prompt\"},{\"type\":\"list\",\"name\":\"score\",\"schema\":{\"type\":\"float\"}},{\"schema\":{\"schema\":[],\"type\":\"object\"},\"type\":\"list\",\"name\":\"searchList\"}]}],\"inputs\":{\"inputParameters\":[{\"name\":\"Query\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"blockID\":\"158309\",\"name\":\"output\",\"source\":\"block-output\"},\"rawMeta\":{\"type\":1}}}}],\"datasetParam\":[{\"name\":\"knowledgeList\",\"input\":{\"type\":\"list\",\"schema\":{\"type\":\"string\"},\"value\":{\"type\":\"literal\",\"content\":[]}}},{\"name\":\"topK\",\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":5}}},{\"name\":\"rerankKeywordPrioritySwitch\",\"input\":{\"type\":\"boolean\",\"value\":{\"type\":\"literal\",\"content\":false,\"rawMeta\":{\"type\":3}}}},{\"name\":\"rewrite\",\"input\":{\"type\":\"boolean\",\"value\":{\"type\":\"literal\",\"content\":true,\"rawMeta\":{\"type\":3}}}},{\"name\":\"threshold\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":0.4}}},{\"name\":\"semanticsPriority\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":0.2}}},{\"name\":\"maxHistory\",\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":0}}},{\"name\":\"rerankKeywordPriority\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":1}}},{\"name\":\"matchType\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"vector\"}}},{\"name\":\"rerankModelId\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"3\"}}}],\"strategyParam\":{\"parsingStrategy\":{\"imageExtraction\":false,\"tableExtraction\":false,\"imageOcr\":false},\"chunkStrategy\":{},\"indexStrategy\":null}}}},{\"id\":\"128117\",\"type\":\"3\",\"meta\":{\"position\":{\"y\":-1.4210854715202004e-14,\"x\":3400}},\"data\":{\"nodeMeta\":{\"title\":\"解读政策内容\",\"description\":\"调用大语言模型,使用变量和提示词生成回复\",\"icon\":\"http://%E2%80%8B%E2%80%8B192.168.0.1:8081/api/static/icon/icon-LLM-v2.png\",\"subTitle\":\"大模型\",\"mainColor\":\"#5C62FF\"},\"outputs\":[{\"name\":\"output\",\"type\":\"string\"}],\"inputs\":{\"inputParameters\":[{\"name\":\"searchList\",\"input\":{\"type\":\"list\",\"schema\":{\"type\":\"object\",\"schema\":[]},\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"181160\",\"name\":\"output.searchList\"},\"rawMeta\":{\"type\":103}}}},{\"name\":\"output\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"158309\",\"name\":\"output\"},\"rawMeta\":{\"type\":1}}}}],\"settingOnError\":{\"processType\":1,\"timeoutMs\":180000},\"llmParam\":[{\"name\":\"generationDiversity\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"balance\",\"rawMeta\":{\"type\":1}}}},{\"name\":\"temperature\",\"input\":{\"type\":\"float\",\"value\":{\"rawMeta\":{\"type\":4},\"type\":\"literal\",\"content\":\"0.8\"}}},{\"name\":\"topP\",\"input\":{\"type\":\"float\",\"value\":{\"type\":\"literal\",\"content\":\"1\",\"rawMeta\":{\"type\":4}}}},{\"name\":\"frequencyPenalty\",\"input\":{\"type\":\"float\",\"value\":{\"rawMeta\":{\"type\":4},\"type\":\"literal\",\"content\":\"0\"}}},{\"name\":\"maxTokens\",\"input\":{\"type\":\"integer\",\"value\":{\"rawMeta\":{\"type\":2},\"type\":\"literal\",\"content\":\"0\"}}},{\"name\":\"responseFormat\",\"input\":{\"type\":\"integer\",\"value\":{\"type\":\"literal\",\"content\":\"2\",\"rawMeta\":{\"type\":2}}}},{\"name\":\"prompt\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"根据以下知识库搜索结果:\\n{{searchList}}\\n回答用户问题：{{output}}\",\"rawMeta\":{\"type\":1}}}},{\"name\":\"enableChatHistory\",\"input\":{\"type\":\"boolean\",\"value\":{\"type\":\"literal\",\"content\":false,\"rawMeta\":{\"type\":3}}}},{\"name\":\"chatHistoryRound\",\"input\":{\"type\":\"integer\",\"value\":{\"rawMeta\":{\"type\":2},\"type\":\"literal\",\"content\":\"3\"}}},{\"name\":\"systemPrompt\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"你是一个智能助手，善于根据已知信息总结回答用户问题\",\"rawMeta\":{\"type\":1}}}}]}}},{\"id\":\"154992\",\"type\":\"32\",\"meta\":{\"position\":{\"x\":2020,\"y\":11.999999999999986}},\"data\":{\"nodeMeta\":{\"title\":\"汇总地区信息\",\"description\":\"对多个分支的输出进行聚合处理\",\"icon\":\"http://%E2%80%8B%E2%80%8B192.168.0.1:8081/api/static/icon/icon-VariableMerge.jpg\",\"subTitle\":\"变量聚合\",\"mainColor\":\"#00B2B2\"},\"outputs\":[{\"type\":\"string\",\"name\":\"Group1\"}],\"inputs\":{\"inputParameters\":null,\"mergeGroups\":[{\"name\":\"Group1\",\"variables\":[{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"152577\",\"name\":\"city\"},\"rawMeta\":{\"type\":1}}},{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"blockID\":\"132703\",\"name\":\"output.city\",\"source\":\"block-output\"},\"rawMeta\":{\"type\":1}}}]}]}}},{\"id\":\"158309\",\"type\":\"15\",\"meta\":{\"position\":{\"x\":2480,\"y\":12.999999999999986}},\"data\":{\"nodeMeta\":{\"title\":\"生成查询语句\",\"description\":\"用于处理多个字符串类型变量的格式\",\"icon\":\"http://%E2%80%8B%E2%80%8B192.168.0.1:8081/api/static/icon/icon-StrConcat-v2.jpg\",\"subTitle\":\"文本处理\",\"mainColor\":\"#3071F2\"},\"outputs\":[{\"name\":\"output\",\"required\":true,\"type\":\"string\"}],\"inputs\":{\"inputParameters\":[{\"name\":\"String1\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"source\":\"block-output\",\"blockID\":\"154992\",\"name\":\"Group1\"},\"rawMeta\":{\"type\":1}}}},{\"name\":\"String2\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"ref\",\"content\":{\"blockID\":\"132703\",\"name\":\"output.question\",\"source\":\"block-output\"},\"rawMeta\":{\"type\":1}}}}],\"method\":\"concat\",\"concatParams\":[{\"name\":\"concatResult\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"我所在城市：{{String1}}，我的问题是：{{String2}}\",\"rawMeta\":{\"type\":1}}}},{\"name\":\"arrayItemConcatChar\",\"input\":{\"type\":\"string\",\"value\":{\"type\":\"literal\",\"content\":\"，\",\"rawMeta\":{\"type\":1}}}},{\"name\":\"allArrayItemConcatChars\",\"input\":{\"type\":\"list\",\"schema\":{\"type\":\"object\",\"schema\":[{\"type\":\"string\",\"name\":\"label\",\"required\":true},{\"type\":\"string\",\"name\":\"value\",\"required\":true},{\"name\":\"isDefault\",\"required\":true,\"type\":\"boolean\"}]},\"value\":{\"type\":\"literal\",\"content\":[{\"label\":\"换行\",\"value\":\"\\n\",\"isDefault\":true},{\"label\":\"制表符\",\"value\":\"\\t\",\"isDefault\":true},{\"label\":\"句号\",\"value\":\"。\",\"isDefault\":true},{\"label\":\"逗号\",\"value\":\"，\",\"isDefault\":true},{\"label\":\"分号\",\"value\":\"；\",\"isDefault\":true},{\"label\":\"空格\",\"value\":\" \",\"isDefault\":true}]}}}]}}}],\"edges\":[{\"sourceNodeID\":\"100001\",\"targetNodeID\":\"132703\"},{\"sourceNodeID\":\"128117\",\"targetNodeID\":\"900001\"},{\"sourceNodeID\":\"132703\",\"targetNodeID\":\"172810\"},{\"sourceNodeID\":\"172810\",\"targetNodeID\":\"152577\",\"sourcePortID\":\"false\"},{\"sourceNodeID\":\"172810\",\"targetNodeID\":\"154992\",\"sourcePortID\":\"true\"},{\"sourceNodeID\":\"152577\",\"targetNodeID\":\"154992\"},{\"sourceNodeID\":\"158309\",\"targetNodeID\":\"181160\"},{\"sourceNodeID\":\"181160\",\"targetNodeID\":\"128117\"},{\"sourceNodeID\":\"154992\",\"targetNodeID\":\"158309\"}],\"versions\":{\"loop\":\"v2\"}}"}